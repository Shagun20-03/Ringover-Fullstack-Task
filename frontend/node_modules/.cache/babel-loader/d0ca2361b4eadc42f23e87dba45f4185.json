{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shagun\\\\Downloads\\\\Ringover-Fullstack-Task\\\\frontend\\\\src\\\\context\\\\auth\\\\AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport { useReducer, createContext } from \"react\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\"; // action creators import\n\nimport { AuthorizeUser, AuthStart, AuthSuccess, AuthError, Logout } from \"./AuthActions\"; // reducer function import\n\nimport AuthReducer from \"./AuthReducer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst INITIAL_STATE = {\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  isFetching: false,\n  error: null\n};\nexport const AuthContext = /*#__PURE__*/createContext(INITIAL_STATE); // auth services imports\n\n_c = AuthContext;\nexport const AuthContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\n\n  const authorizeUser = async () => {\n    try {\n      const user = await axios.get(\"/api/users/showMe\", {\n        withCredentials: true\n      });\n      dispatch(AuthorizeUser(user.data.user));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const loginRequest = async _ref2 => {\n    let {\n      email,\n      password\n    } = _ref2;\n    dispatch(AuthStart());\n\n    try {\n      const res = await axios.post(\"/api/auth/login\", {\n        email,\n        password\n      }, {\n        withCredentials: true\n      });\n      dispatch(AuthSuccess(res.data.user));\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n    } catch (err) {\n      dispatch(AuthError(err.response.data));\n      toast.error(err.response.data.message);\n    }\n  };\n\n  const registerRequest = async body => {\n    dispatch(AuthStart());\n\n    try {\n      const res = await axios.post(\"/api/auth/register\", body, {\n        withCredentials: true\n      });\n      dispatch(AuthSuccess(res.data.user));\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n    } catch (err) {\n      dispatch(AuthError(err.response.data));\n      toast.error(err.response.data.message);\n    }\n  };\n\n  const logoutRequest = async () => {\n    await axios.get(\"/api/auth/logout\", {\n      withCredentials: true\n    });\n    localStorage.removeItem(\"user\");\n    dispatch(Logout());\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: { ...state,\n      authorizeUser,\n      loginRequest,\n      registerRequest,\n      logoutRequest\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthContextProvider, \"ih+Vd9fHXqjzC8XFlo5K5uS4lm8=\");\n\n_c2 = AuthContextProvider;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuthContext\");\n$RefreshReg$(_c2, \"AuthContextProvider\");","map":{"version":3,"names":["useReducer","createContext","axios","toast","AuthorizeUser","AuthStart","AuthSuccess","AuthError","Logout","AuthReducer","INITIAL_STATE","user","JSON","parse","localStorage","getItem","isFetching","error","AuthContext","AuthContextProvider","children","state","dispatch","authorizeUser","get","withCredentials","data","err","console","log","loginRequest","email","password","res","post","setItem","stringify","response","message","registerRequest","body","logoutRequest","removeItem"],"sources":["C:/Users/Shagun/Downloads/Ringover-Fullstack-Task/frontend/src/context/auth/AuthContext.js"],"sourcesContent":["import { useReducer, createContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\n// action creators import\r\nimport {\r\n  AuthorizeUser,\r\n  AuthStart,\r\n  AuthSuccess,\r\n  AuthError,\r\n  Logout,\r\n} from \"./AuthActions\";\r\n\r\n// reducer function import\r\nimport AuthReducer from \"./AuthReducer\";\r\n\r\nconst INITIAL_STATE = {\r\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\r\n  isFetching: false,\r\n  error: null,\r\n};\r\n\r\nexport const AuthContext = createContext(INITIAL_STATE);\r\n\r\n// auth services imports\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\r\n\r\n  const authorizeUser = async () => {\r\n    try {\r\n      const user = await axios.get(\"/api/users/showMe\", {\r\n        withCredentials: true,\r\n      });\r\n      dispatch(AuthorizeUser(user.data.user));\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const loginRequest = async ({ email, password }) => {\r\n    dispatch(AuthStart());\r\n    try {\r\n      const res = await axios.post(\r\n        \"/api/auth/login\",\r\n        { email, password },\r\n        { withCredentials: true }\r\n      );\r\n      dispatch(AuthSuccess(res.data.user));\r\n\r\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user));\r\n    } catch (err) {\r\n      dispatch(AuthError(err.response.data));\r\n      toast.error(err.response.data.message);\r\n    }\r\n  };\r\n\r\n  const registerRequest = async (body) => {\r\n    dispatch(AuthStart());\r\n    try {\r\n      const res = await axios.post(\"/api/auth/register\", body, {\r\n        withCredentials: true,\r\n      });\r\n\r\n      dispatch(AuthSuccess(res.data.user));\r\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user));\r\n    } catch (err) {\r\n      dispatch(AuthError(err.response.data));\r\n      toast.error(err.response.data.message);\r\n    }\r\n  };\r\n\r\n  const logoutRequest = async () => {\r\n    await axios.get(\"/api/auth/logout\", { withCredentials: true });\r\n    localStorage.removeItem(\"user\");\r\n    dispatch(Logout());\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        ...state,\r\n        authorizeUser,\r\n        loginRequest,\r\n        registerRequest,\r\n        logoutRequest,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}