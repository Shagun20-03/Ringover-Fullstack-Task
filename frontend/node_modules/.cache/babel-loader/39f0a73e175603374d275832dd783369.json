{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shagun\\\\Downloads\\\\Ringover-Fullstack-Task\\\\frontend\\\\src\\\\components\\\\rating\\\\Rating.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./rating.scss\";\nimport { useState, useContext, useEffect } from \"react\";\nimport RatingComponent from \"react-rating\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { AuthContext } from \"../../context/auth/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Rating = _ref => {\n  _s();\n\n  let {\n    id\n  } = _ref;\n  const {\n    user\n  } = useContext(AuthContext);\n  const [rating, setRating] = useState(null);\n  const [hasRated, setHasRated] = useState({\n    rated: false,\n    value: null\n  });\n\n  const getCurrentUser = async () => {\n    const res = await axios.get(`/api/users/${user.userId}`);\n    res.data.user.reviews.forEach(review => {\n      if (review.product === id) {\n        setHasRated({\n          rated: true,\n          value: review.rating\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    getCurrentUser();\n  }, []);\n\n  const handleRating = async () => {\n    try {\n      await axios.post(`/api/reviews/${id}`, {\n        rating\n      });\n      setHasRated({\n        rated: true,\n        value: rating\n      });\n    } catch (e) {\n      toast.error(e.response.data.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rating\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: !hasRated.rated ? \"Rate Product\" : \"Rated\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RatingComponent, {\n      readonly: hasRated.rated,\n      initialRating: hasRated.rated ? hasRated.value : rating || undefined,\n      onChange: rate => setRating(rate),\n      emptySymbol: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/assets/star-empty.png\",\n        alt: \"star empty\",\n        className: \"star\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this),\n      fullSymbol: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/assets/star-fill.png\",\n        alt: \"star fill\",\n        className: \"star\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), !!rating && !hasRated.rated && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRating,\n        disabled: !rating,\n        children: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"reset\",\n        onClick: () => setRating(null),\n        children: \"reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Rating, \"BDuXVyQa19VuDxixYaBNjn43TnE=\");\n\n_c = Rating;\nexport default Rating;\n\nvar _c;\n\n$RefreshReg$(_c, \"Rating\");","map":{"version":3,"names":["useState","useContext","useEffect","RatingComponent","axios","toast","AuthContext","Rating","id","user","rating","setRating","hasRated","setHasRated","rated","value","getCurrentUser","res","get","userId","data","reviews","forEach","review","product","handleRating","post","e","error","response","message","undefined","rate"],"sources":["C:/Users/Shagun/Downloads/Ringover-Fullstack-Task/frontend/src/components/rating/Rating.jsx"],"sourcesContent":["import \"./rating.scss\";\r\nimport { useState, useContext, useEffect } from \"react\";\r\nimport RatingComponent from \"react-rating\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { AuthContext } from \"../../context/auth/AuthContext\";\r\n\r\nconst Rating = ({ id }) => {\r\n  const { user } = useContext(AuthContext);\r\n  const [rating, setRating] = useState(null);\r\n\r\n  const [hasRated, setHasRated] = useState({ rated: false, value: null });\r\n\r\n  const getCurrentUser = async () => {\r\n    const res = await axios.get(`/api/users/${user.userId}`);\r\n    res.data.user.reviews.forEach((review) => {\r\n      if (review.product === id) {\r\n        setHasRated({ rated: true, value: review.rating });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getCurrentUser();\r\n  }, []);\r\n\r\n  const handleRating = async () => {\r\n    try {\r\n      await axios.post(`/api/reviews/${id}`, { rating });\r\n      setHasRated({ rated: true, value: rating });\r\n    } catch (e) {\r\n      toast.error(e.response.data.message);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"rating\">\r\n      <span>{!hasRated.rated ? \"Rate Product\" : \"Rated\"}</span>\r\n      <RatingComponent\r\n        readonly={hasRated.rated}\r\n        initialRating={hasRated.rated ? hasRated.value : rating || undefined}\r\n        onChange={(rate) => setRating(rate)}\r\n        emptySymbol={\r\n          <img src=\"/assets/star-empty.png\" alt=\"star empty\" className=\"star\" />\r\n        }\r\n        fullSymbol={\r\n          <img src=\"/assets/star-fill.png\" alt=\"star fill\" className=\"star\" />\r\n        }\r\n      />\r\n      {!!rating && !hasRated.rated && (\r\n        <div>\r\n          <button onClick={handleRating} disabled={!rating}>\r\n            submit\r\n          </button>\r\n          <button className=\"reset\" onClick={() => setRating(null)}>\r\n            reset\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rating;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}