{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shagun\\\\Downloads\\\\Ringover-Fullstack-Task\\\\frontend\\\\src\\\\components\\\\cart\\\\Cart.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./cart.scss\";\nimport { useState, useEffect, forwardRef, useImperativeHandle } from \"react\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport Spinner from \"react-spinner-material\"; // import { ITEMS } from \"../../mockData\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Cart = /*#__PURE__*/_s( /*#__PURE__*/forwardRef(_c = _s((props, ref) => {\n  _s();\n\n  const [cartItems, setCartItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const fetchCartItems = async () => {\n    setLoading(true);\n\n    try {\n      const res = await axios.get(\"/api/products/cart\");\n      setCartItems(res.data.products || []);\n      setLoading(false);\n    } catch (e) {\n      setLoading(false);\n      toast.error(e.response.data.message);\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    fetchCartItems\n  }));\n  useEffect(() => {\n    fetchCartItems();\n  }, []);\n\n  const handleRemove = async id => {\n    try {\n      const res = await axios.delete(\"/api/products/cart\", {\n        data: {\n          id\n        }\n      });\n      toast.success(res.data.message);\n      fetchCartItems();\n    } catch (e) {\n      toast.error(e.response.data.message);\n    }\n  };\n\n  const handleOrder = async () => {\n    try {\n      const res = await axios.post(\"/api/orders/checkout\");\n      fetchCartItems();\n      toast.success(res.data.message);\n    } catch (e) {\n      toast.error(e.response.data.message);\n    }\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper wrapper-loader\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/assets/bag.png\",\n          alt: \"bag\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"center\",\n        children: [!!cartItems.length && cartItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cartItem\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"imgWrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.images[1],\n              alt: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"img\", {\n              onClick: () => handleRemove(item.product_id),\n              src: \"/assets/cancel.png\",\n              alt: \"cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: item.seller_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: item.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, this)]\n        }, item.product_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this)), !cartItems.length && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"What's stopping you, designer?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"details\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/assets/pin.png\",\n              alt: \"pin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/assets/calendar.png\",\n              alt: \"calendar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Select date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: !cartItems.length,\n          onClick: handleOrder,\n          children: \"Order Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), \" &nbsp \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRemove\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}, \"1foOidJpTBSDz4v6WVC5sOKDb54=\")), \"1foOidJpTBSDz4v6WVC5sOKDb54=\");\n\n_c2 = Cart;\nexport default Cart;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Cart$forwardRef\");\n$RefreshReg$(_c2, \"Cart\");","map":{"version":3,"names":["useState","useEffect","forwardRef","useImperativeHandle","toast","axios","Spinner","Cart","props","ref","cartItems","setCartItems","loading","setLoading","fetchCartItems","res","get","data","products","e","error","response","message","handleRemove","id","delete","success","handleOrder","post","length","map","item","images","name","product_id","seller_name","price"],"sources":["C:/Users/Shagun/Downloads/Ringover-Fullstack-Task/frontend/src/components/cart/Cart.jsx"],"sourcesContent":["import \"./cart.scss\";\r\nimport { useState, useEffect, forwardRef, useImperativeHandle } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport axios from \"axios\";\r\nimport Spinner from \"react-spinner-material\";\r\n\r\n// import { ITEMS } from \"../../mockData\";\r\n\r\nconst Cart = forwardRef((props, ref) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchCartItems = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await axios.get(\"/api/products/cart\");\r\n      setCartItems(res.data.products || []);\r\n\r\n      setLoading(false);\r\n    } catch (e) {\r\n      setLoading(false);\r\n      toast.error(e.response.data.message);\r\n    }\r\n  };\r\n\r\n  useImperativeHandle(ref, () => ({ fetchCartItems }));\r\n\r\n  useEffect(() => {\r\n    fetchCartItems();\r\n  }, []);\r\n\r\n  const handleRemove = async (id) => {\r\n    try {\r\n      const res = await axios.delete(\"/api/products/cart\", { data: { id } });\r\n      toast.success(res.data.message);\r\n      fetchCartItems();\r\n    } catch (e) {\r\n      toast.error(e.response.data.message);\r\n    }\r\n  };\r\n\r\n  const handleOrder = async () => {\r\n    try {\r\n      const res = await axios.post(\"/api/orders/checkout\");\r\n      fetchCartItems();\r\n      toast.success(res.data.message);\r\n    } catch (e) {\r\n      toast.error(e.response.data.message);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"cart\">\r\n        <div className=\"wrapper wrapper-loader\">\r\n          <Spinner />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"cart\">\r\n      <div className=\"wrapper\">\r\n        <div className=\"top\">\r\n          <h2>Cart</h2>\r\n          <img src=\"/assets/bag.png\" alt=\"bag\" />\r\n        </div>\r\n        <div className=\"center\">\r\n          {!!cartItems.length &&\r\n            cartItems.map((item) => (\r\n              <div className=\"cartItem\" key={item.product_id}>\r\n                <div className=\"imgWrapper\">\r\n                  <img src={item.images[1]} alt={item.name} />{\" \"}\r\n                  <img\r\n                    onClick={() => handleRemove(item.product_id)}\r\n                    src=\"/assets/cancel.png\"\r\n                    alt=\"cancel\"\r\n                  />\r\n                </div>\r\n                <div className=\"right\">\r\n                  <h3>{item.name}</h3>\r\n                  <span>{item.seller_name}</span>\r\n\r\n                  <h3>{item.price}</h3>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          {!cartItems.length && <span>What's stopping you, designer?</span>}\r\n        </div>\r\n        <div className=\"bottom\">\r\n          <div className=\"details\">\r\n            <div className=\"info\">\r\n              <img src=\"/assets/pin.png\" alt=\"pin\" />\r\n              <span>Home</span>\r\n            </div>\r\n            <div className=\"info\">\r\n              <img src=\"/assets/calendar.png\" alt=\"calendar\" />\r\n              <span>Select date</span>\r\n            </div>\r\n          </div>\r\n          <button disabled={!cartItems.length} onClick={handleOrder}> \r\n            Order Now \r\n          </button> &nbsp <button onClick={handleRemove}></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Cart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}